{% extends "layout.html" %}
{% block title %}{{ profilename }}{% endblock %}
{% block content %}


{% if message %}
<div class="alert alert-warning">{{ message }}</div>
{% endif %}

<h1>Profile for <b>{{ profilename }}</b></h1>
<br/>

<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="latest-tab" data-toggle="tab" href="#latest" role="tab" aria-controls="latest"
            aria-selected="true">Recipes added</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="popular-tab" data-toggle="tab" href="#popular" role="tab" aria-controls="popular"
            aria-selected="false">Recipes liked</a>
    </li>
</ul>

<div class="tab-content" id="nav-tabContent">
    <div class="tab-pane fade show active" id="latest" role="tabpanel" aria-labelledby="latest-tab">

        {% if latest|length > 0 %}
        {% for recipe in latest %}
        <div class="card">
            <div class="card-body">
                <h3 class="card-title">{{ recipe.name }}</h3>
                <div class="card-subtitle mb-2"><small
                        class="text-muted">{{ recipe.created_at.strftime("%Y-%m-%d %H:%M") }}
                        | <a href="/profile/{{ recipe.profilename }}">{{ recipe.profilename }}</a>
                    </small></div>
                <p class="card-text">{{ recipe.description }}</p>
                <a href="/recipe/{{ recipe.id }}" class="card-link">Show recipe</a>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="card">
            <div class="card-body">
                <p class="card-text">No recipes added by this user.</p>
            </div>
        </div>
        {% endif %}
    </div>
    <div class="tab-pane fade" id="popular" role="tabpanel" aria-labelledby="popular-tab">
        {% if popular|length > 0 %}
        {% for recipe in popular %}
        <div class="card">
            <div class="card-body">
                <h3 class="card-title">{{ recipe.name }}</h3>
                <div class="card-subtitle mb-2"><small
                        class="text-muted">{{ recipe.created_at.strftime("%Y-%m-%d %H:%M") }}
                        | <a href="/profile/{{ recipe.profilename }}">{{ recipe.profilename }}</a> | <i
                            class="fa fa-heart"></i> Likes {{ recipe.popularity }}
                    </small></div>
                <p class="card-text">{{ recipe.description }}</p>
                <a href="/recipe/{{ recipe.id }}" class="card-link">Show recipe</a>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="card">
            <div class="card-body">
                <p class="card-text">No recipes liked by this user.</p>
            </div>
        </div>
        {% endif %}

    </div>

    {% endblock %}